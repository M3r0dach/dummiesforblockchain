下面我们讨论另外一个优化技术。

如前所述，比特币的数据库大小已经超过140GB，由于天生的去中心化特性，比特币网络中的每个节点都是独立、自立的，这意味着每个节点必须存储整个blockchain。随着比特币使用者的日益增多，人人拥有整个blockchain变得越来越困难。同时，作为完全的参与者，富有对交易和block进行验证的责任，这需要节点之间通过网络进行交互从而下载新的block。

在中本聪发布的[比特币白皮书](https://bitcoin.org/bitcoin.pdf)中，针对此问题提供了一个解决方案：SPV（Simplified Payment Verification）。SPV是一个轻量级的比特币节点，该节点不会下载整个blockchain，也不会对block和交易进行验证，而是通过查找block中的交易来验证支付，同时连接到一个完整节点获取所需数据。SPV机制允许多个轻量级节点对应一个完整节点。为了实现SPV，需要一种交易检测方法，若包含该交易就无需下载整个block，此时默克尔树派上用场了。

比特币使用默克尔树获取交易hash值，交易hash值保存在block的头信息中，应用于PoW。目前，仅仅将一个block中所有交易的hash值简单地组合在一起，然后再使用SHA256算法生成hash值，虽然这也可以为block的交易集合创建唯一标识，但默克尔树有一些额外的优势。

默克尔树如下所示：



